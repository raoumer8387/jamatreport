<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ماہانہ رپورٹ - {{ zila }}</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
</head>
<body>
    <div class="container">
        <header class="report-header">
            <div class="header-content">
                <h1>Jamat e Islami</h1>
                <h2>ماہانہ کارکردگی رپورٹ</h2>
                <h3>{{ zila }}</h3>
                <p class="current-month">{{ current_month }}</p>
            </div>
        </header>


        <div class="alert alert-warning" style="margin-bottom: 20px;">
            <strong>نوٹ:</strong> براہ کرم کوئی بھی فیلڈ خالی نہ چھوڑیں۔
        </div>

        <form method="POST" class="report-form">
            <!-- Hidden fields for آغاز and ہدف values -->
            <input type="hidden" name="alaqajat_start" value="{{ form_data.get('alaqajat_start', 0) }}">
            <input type="hidden" name="alaqajat_target" value="{{ form_data.get('alaqajat_target', 0) }}">
            <input type="hidden" name="halqajat_start" value="{{ form_data.get('halqajat_start', 0) }}">
            <input type="hidden" name="halqajat_target" value="{{ form_data.get('halqajat_target', 0) }}">
            <input type="hidden" name="halqajat_ward_start" value="{{ form_data.get('halqajat_ward_start', 0) }}">
            <input type="hidden" name="halqajat_ward_target" value="{{ form_data.get('halqajat_ward_target', 0) }}">
            <input type="hidden" name="block_code_start" value="{{ form_data.get('block_code_start', 0) }}">
            <input type="hidden" name="block_code_target" value="{{ form_data.get('block_code_target', 0) }}">
            <input type="hidden" name="arkaan_start" value="{{ form_data.get('arkaan_start', 0) }}">
            <input type="hidden" name="arkaan_target" value="{{ form_data.get('arkaan_target', 0) }}">
            <input type="hidden" name="umeedwaran_start" value="{{ form_data.get('umeedwaran_start', 0) }}">
            <input type="hidden" name="umeedwaran_target" value="{{ form_data.get('umeedwaran_target', 0) }}">
            <input type="hidden" name="hangami_start" value="{{ form_data.get('hangami_start', 0) }}">
            <input type="hidden" name="hangami_target" value="{{ form_data.get('hangami_target', 0) }}">
            <input type="hidden" name="muawanin_start" value="{{ form_data.get('muawanin_start', 0) }}">
            <input type="hidden" name="muawanin_target" value="{{ form_data.get('muawanin_target', 0) }}">
            <input type="hidden" name="mutayyin_afrad_start" value="{{ form_data.get('mutayyin_afrad_start', 0) }}">
            <input type="hidden" name="mutayyin_afrad_target" value="{{ form_data.get('mutayyin_afrad_target', 0) }}">
            <input type="hidden" name="member_start" value="{{ form_data.get('member_start', 0) }}">
            <input type="hidden" name="member_target" value="{{ form_data.get('member_target', 0) }}">

            <!-- ابتدائی معلومات -->
            <div class="form-section">
                <h3 class="section-title">ابتدائی معلومات</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label>تعداد یونین کمیٹی </label>
                        <span class="prev-value">{{ form_data.get('union_committee_count', 0) }}</span>
                    </div>
                    <div class="form-group">
                        <label for="nazm-qaim-union">نظم قائم </label>
                        <input type="number" id="nazm_qaim_union" name="nazm_qaim_union" min="0" required value="{{ form_data.get('nazm_qaim_union', '') }}" placeholder="0" {% if locked_fields['nazm_qaim_union'] %}readonly{% endif %}>
                        {% if locked_fields['nazm_qaim_union'] %}
                          <input type="hidden" name="nazm_qaim_union" value="{{ form_data.get('nazm_qaim_union', '') }}">
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>تعداد وارڈز </label>
                        <span class="prev-value">{{ form_data.get('wards_count', 0) }}</span>
                    </div>
                    <div class="form-group">
                        <label for="nazm-qaim-wards">نظم قائم </label>
                        <input type="number" id="nazm_qaim_wards" name="nazm_qaim_wards" min="0" required value="{{ form_data.get('nazm_qaim_wards', '') }}" placeholder="0" {% if locked_fields['nazm_qaim_wards'] %}readonly{% endif %}>
                        {% if locked_fields['nazm_qaim_wards'] %}
                          <input type="hidden" name="nazm_qaim_wards" value="{{ form_data.get('nazm_qaim_wards', '') }}">
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>تعداد بلاک کوڈ </label>
                        <span class="prev-value">{{ form_data.get('block_code_count', 0) }}</span>
                    </div>
                    <div class="form-group">
                        <label for="nazm-qaim-blockcode">نظم قائم </label>
                        <input type="number" id="nazm_qaim_blockcode" name="nazm_qaim_blockcode" min="0" required value="{{ form_data.get('nazm_qaim_blockcode', '') }}" placeholder="0" {% if locked_fields['nazm_qaim_blockcode'] %}readonly{% endif %}>
                        {% if locked_fields['nazm_qaim_blockcode'] %}
                          <input type="hidden" name="nazm_qaim_blockcode" value="{{ form_data.get('nazm_qaim_blockcode', '') }}">
                        {% endif %}
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label>تعداد کنٹونمنٹ بورڈ </label>
                        <span class="prev-value">{{ form_data.get('cantonment_board_count', 0) }}</span>
                    </div>
                    <div class="form-group">
                        <label for="nazm-qaim-cantonment">نظم قائم </label>
                        <input type="number" id="nazm_qaim_cantonment" name="nazm_qaim_cantonment" min="0" required value="{{ form_data.get('nazm_qaim_cantonment', '') }}" placeholder="0" {% if locked_fields['nazm_qaim_cantonment'] %}readonly{% endif %}>
                        {% if locked_fields['nazm_qaim_cantonment'] %}
                          <input type="hidden" name="nazm_qaim_cantonment" value="{{ form_data.get('nazm_qaim_cantonment', '') }}">
                        {% endif %}
                    </div>
                </div>
            </div>
            <script>
                function calculateIkhtitaam(prefix) {
                    const aghaaz = parseInt(document.getElementById(prefix + '-aghaaz').textContent) || 0;
                    const izafa = parseInt(document.getElementById(prefix + '-izafa').value) || 0;
                    const kami = parseInt(document.getElementById(prefix + '-kami').value) || 0;
                    const ikhtitaam = aghaaz + izafa - kami;
                    document.getElementById(prefix + '-ikhtitaam').textContent = ikhtitaam;
                }
                // Add event listeners for new rows
                document.addEventListener('DOMContentLoaded', function () {
                    ['nizam-e-fajar', 'awaami-committee'].forEach(function(prefix) {
                        const izafa = document.getElementById(prefix + '-izafa');
                        const kami = document.getElementById(prefix + '-kami');
                        if (izafa) izafa.addEventListener('input', function() { calculateIkhtitaam(prefix); });
                        if (kami) kami.addEventListener('input', function() { calculateIkhtitaam(prefix); });
                        calculateIkhtitaam(prefix);
                    });
                });
            </script>
            <!-- تنظیمی ہیٔت -->
            <div class="form-section">
                <h3 class="section-title">تنظیمی ہیٔت</h3>
                <table class="organizational-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>ہدف</th>
                            <th>آغاز</th>
                            <th>اضافہ</th>
                            <th>کمی</th>
                            <th>اختتام</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>علاقہ جات</td>
                            <td class="prev-value" id="alaqajat-hadaf">{{ form_data.get('alaqajat_target', 0) }}</td>
                            <td class="prev-value" id="alaqajat-aghaaz">{{ form_data.get('alaqajat_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="alaqajat-izafa" name="alaqajat_izafa" min="0" required value="{{ form_data.get('alaqajat_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('alaqajat')" {% if locked_fields['alaqajat_izafa'] %}readonly{% endif %}>
                                {% if locked_fields['alaqajat_izafa'] %}
                                  <input type="hidden" name="alaqajat_izafa" value="{{ form_data.get('alaqajat_izafa', '') }}">
                                {% endif %}
                            </td>
                            <td>
                                <input type="number" class="input-field" id="alaqajat-kami" name="alaqajat_kami" min="0" required value="{{ form_data.get('alaqajat_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('alaqajat')" {% if locked_fields['alaqajat_kami'] %}readonly{% endif %}>
                                {% if locked_fields['alaqajat_kami'] %}
                                  <input type="hidden" name="alaqajat_kami" value="{{ form_data.get('alaqajat_kami', '') }}">
                                {% endif %}
                            </td>
                            <td class="calculated-value" id="alaqajat-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('alaqajat_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('alaqajat_start', 0) | int) + (form_data.get('alaqajat_izafa', 0) | int) - (form_data.get('alaqajat_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>حلقہ جات </td>
                            <td class="prev-value" id="halqajat-hadaf">{{ form_data.get('halqajat_target', 0) }}</td>
                            <td class="prev-value" id="halqajat-aghaaz">{{ form_data.get('halqajat_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="halqajat-izafa" name="halqajat_izafa" min="0" required value="{{ form_data.get('halqajat_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('halqajat')" {% if locked_fields['halqajat_izafa'] %}readonly{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="halqajat-kami" name="halqajat_kami" min="0" required value="{{ form_data.get('halqajat_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('halqajat')" {% if locked_fields['halqajat_kami'] %}readonly{% endif %}>
                            </td>
                            <td class="calculated-value" id="halqajat-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('halqajat_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('halqajat_start', 0) | int) + (form_data.get('halqajat_izafa', 0) | int) - (form_data.get('halqajat_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>کتنے حلقہ جات وارڈ کی سطح پر قائم ہیں  </td>
                            <td class="prev-value" id="halqajat-ward-hadaf">{{ form_data.get('halqajat_ward_target', 0) }}</td>
                            <td class="prev-value" id="halqajat-ward-aghaaz">{{ form_data.get('halqajat_ward_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="halqajat-ward-izafa" name="halqajat_ward_izafa" min="0" required value="{{ form_data.get('halqajat_ward_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('halqajat-ward')" {% if locked_fields['halqajat_ward_izafa'] %}readonly{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="halqajat-ward-kami" name="halqajat_ward_kami" min="0" required value="{{ form_data.get('halqajat_ward_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('halqajat-ward')" {% if locked_fields['halqajat_ward_kami'] %}readonly{% endif %}>
                            </td>
                            <td class="calculated-value" id="halqajat-ward-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('halqajat_ward_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('halqajat_ward_start', 0) | int) + (form_data.get('halqajat_ward_izafa', 0) | int) - (form_data.get('halqajat_ward_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>بلاک کوڈ انچارجز </td>
                            <td class="prev-value" id="block-code-hadaf">{{ form_data.get('block_code_target', 0) }}</td>
                            <td class="prev-value" id="block-code-aghaaz">{{ form_data.get('block_code_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="block-code-izafa" name="block_code_izafa" min="0" required value="{{ form_data.get('block_code_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('block-code')" {% if locked_fields['block_code_izafa'] %}readonly{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="block-code-kami" name="block_code_kami" min="0" required value="{{ form_data.get('block_code_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('block-code')" {% if locked_fields['block_code_kami'] %}readonly{% endif %}>
                            </td>
                            <td class="calculated-value" id="block-code-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('block_code_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('block_code_start', 0) | int) + (form_data.get('block_code_izafa', 0) | int) - (form_data.get('block_code_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>نظام فجر</td>
                            <td class="prev-value" id="nizam-e-fajar-hadaf">{{ form_data.get('nizam_e_fajar_target', 0) }}</td>
                            <td class="prev-value" id="nizam-e-fajar-aghaaz">{{ form_data.get('nizam_e_fajar_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="nizam-e-fajar-izafa" name="nizam_e_fajar_izafa" min="0" required value="{{ form_data.get('nizam_e_fajar_izafa', '') }}" placeholder="0" {% if locked_fields['nizam_e_fajar_izafa'] %}readonly{% endif %}>
                                {% if locked_fields['nizam_e_fajar_izafa'] %}
                                  <input type="hidden" name="nizam_e_fajar_izafa" value="{{ form_data.get('nizam_e_fajar_izafa', '') }}">
                                {% endif %}
                            </td>
                            <td>
                                <input type="number" class="input-field" id="nizam-e-fajar-kami" name="nizam_e_fajar_kami" min="0" required value="{{ form_data.get('nizam_e_fajar_kami', '') }}" placeholder="0" {% if locked_fields['nizam_e_fajar_kami'] %}readonly{% endif %}>
                                {% if locked_fields['nizam_e_fajar_kami'] %}
                                  <input type="hidden" name="nizam_e_fajar_kami" value="{{ form_data.get('nizam_e_fajar_kami', '') }}">
                                {% endif %}
                            </td>
                            <td class="calculated-value" id="nizam-e-fajar-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('nizam_e_fajar_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('nizam_e_fajar_start', 0) | int) + (form_data.get('nizam_e_fajar_izafa', 0) | int) - (form_data.get('nizam_e_fajar_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>عوامی کمیٹی</td>
                            <td class="prev-value" id="awaami-committee-hadaf">{{ form_data.get('awaami_committee_target', 0) }}</td>
                            <td class="prev-value" id="awaami-committee-aghaaz">{{ form_data.get('awaami_committee_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="awaami-committee-izafa" name="awaami_committee_izafa" min="0" required value="{{ form_data.get('awaami_committee_izafa', '') }}" placeholder="0" {% if locked_fields['awaami_committee_izafa'] %}readonly{% endif %}>
                                {% if locked_fields['awaami_committee_izafa'] %}
                                  <input type="hidden" name="awaami_committee_izafa" value="{{ form_data.get('awaami_committee_izafa', '') }}">
                                {% endif %}
                            </td>
                            <td>
                                <input type="number" class="input-field" id="awaami-committee-kami" name="awaami_committee_kami" min="0" required value="{{ form_data.get('awaami_committee_kami', '') }}" placeholder="0" {% if locked_fields['awaami_committee_kami'] %}readonly{% endif %}>
                                {% if locked_fields['awaami_committee_kami'] %}
                                  <input type="hidden" name="awaami_committee_kami" value="{{ form_data.get('awaami_committee_kami', '') }}">
                                {% endif %}
                            </td>
                            <td class="calculated-value" id="awaami-committee-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('awaami_committee_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('awaami_committee_start', 0) | int) + (form_data.get('awaami_committee_izafa', 0) | int) - (form_data.get('awaami_committee_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!-- افرادی قوت -->
            <div class="form-section">
                <h3 class="section-title">افرادی قوت</h3>
                <table class="organizational-table">
                    <thead>
                        <tr>
                            <th></th>
                            <th>ہدف</th>
                            <th>آغاز</th>
                            <th>اضافہ</th>
                            <th>کمی</th>
                            <th>اختتام</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>ارکان</td>
                            <td class="prev-value" id="arkaan-hadaf">{{ form_data.get('arkaan_target', 0) }}</td>
                            <td class="prev-value" id="arkaan-aghaaz">{{ form_data.get('arkaan_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="arkaan-izafa" name="arkaan_izafa" min="0" required value="{{ form_data.get('arkaan_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('arkaan')" {% if form_data.get('arkaan_izafa', '') != '' %}disabled{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="arkaan-kami" name="arkaan_kami" min="0" required value="{{ form_data.get('arkaan_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('arkaan')" {% if form_data.get('arkaan_kami', '') != '' %}disabled{% endif %}>
                            </td>
                            <td class="calculated-value" id="arkaan-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('arkaan_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('arkaan_start', 0) | int) + (form_data.get('arkaan_izafa', 0) | int) - (form_data.get('arkaan_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>امیدواران رکنیت </td>
                            <td class="prev-value" id="umeedwaran-hadaf">{{ form_data.get('umeedwaran_target', 0) }}</td>
                            <td class="prev-value" id="umeedwaran-start">{{ form_data.get('umeedwaran_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="umeedwaran-izafa" name="umeedwaran_izafa" min="0" required value="{{ form_data.get('umeedwaran_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('umeedwaran')" {% if form_data.get('umeedwaran_izafa', '') != '' %}disabled{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="umeedwaran-kami" name="umeedwaran_kami" min="0" required value="{{ form_data.get('umeedwaran_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('umeedwaran')" {% if form_data.get('umeedwaran_kami', '') != '' %}disabled{% endif %}>
                            </td>
                            <td class="calculated-value" id="umeedwaran-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('umeedwaran_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('umeedwaran_start', 0) | int) + (form_data.get('umeedwaran_izafa', 0) | int) - (form_data.get('umeedwaran_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>ہنگامی/ دیگر کارکنان</td>   
                            <td class="prev-value" id="hangami-hadaf">{{ form_data.get('hangami_target', 0) }}</td>
                            <td class="prev-value" id="hangami-aghaaz">{{ form_data.get('hangami_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="hangami-izafa" name="hangami_izafa" min="0" required value="{{ form_data.get('hangami_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('hangami')" {% if form_data.get('hangami_izafa', '') != '' %}disabled{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="hangami-kami" name="hangami_kami" min="0" required value="{{ form_data.get('hangami_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('hangami')" {% if form_data.get('hangami_kami', '') != '' %}disabled{% endif %}>
                            </td>
                            <td class="calculated-value" id="hangami-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('hangami_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('hangami_start', 0) | int) + (form_data.get('hangami_izafa', 0) | int) - (form_data.get('hangami_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        
                        <tr>
                            <td>معاونین</td>
                            <td class="prev-value" id="muawanin-hadaf">{{ form_data.get('muawanin_target', 0) }}</td>
                            <td class="prev-value" id="muawanin-aghaaz">{{ form_data.get('muawanin_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="muawanin-izafa" name="muawanin_izafa" min="0" required value="{{ form_data.get('muawanin_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('muawanin')" {% if form_data.get('muawanin_izafa', '') != '' %}disabled{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="muawanin-kami" name="muawanin_kami" min="0" required value="{{ form_data.get('muawanin_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('muawanin')" {% if form_data.get('muawanin_kami', '') != '' %}disabled{% endif %}>
                            </td>
                            <td class="calculated-value" id="muawanin-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('muawanin_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('muawanin_start', 0) | int) + (form_data.get('muawanin_izafa', 0) | int) - (form_data.get('muawanin_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>متعین افراد</td>
                            <td class="prev-value" id="mutayyin-afrad-hadaf">{{ form_data.get('mutayyin_afrad_target', 0) }}</td>
                            <td class="prev-value" id="mutayyin-afrad-aghaaz">{{ form_data.get('mutayyin_afrad_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="mutayyin-afrad-izafa" name="mutayyin_afrad_izafa" min="0" required value="{{ form_data.get('mutayyin_afrad_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('mutayyin-afrad')" {% if form_data.get('mutayyin_afrad_izafa', '') != '' %}disabled{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="mutayyin-afrad-kami" name="mutayyin_afrad_kami" min="0" required value="{{ form_data.get('mutayyin_afrad_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('mutayyin-afrad')" {% if form_data.get('mutayyin_afrad_kami', '') != '' %}disabled{% endif %}>
                            </td>
                            <td class="calculated-value" id="mutayyin-afrad-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('mutayyin_afrad_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('mutayyin_afrad_start', 0) | int) + (form_data.get('mutayyin_afrad_izafa', 0) | int) - (form_data.get('mutayyin_afrad_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                        <tr>
                            <td>ممبران</td>
                            <td class="prev-value" id="member-hadaf">{{ form_data.get('member_target', 0) }}</td>
                            <td class="prev-value" id="member-aghaaz">{{ form_data.get('member_start', 0) }}</td>
                            <td>
                                <input type="number" class="input-field" id="member-izafa" name="member_izafa" min="0" required value="{{ form_data.get('member_izafa', '') }}" placeholder="0" oninput="calculateIkhtitaam('member')" {% if form_data.get('member_izafa', '') != '' %}disabled{% endif %}>
                            </td>
                            <td>
                                <input type="number" class="input-field" id="member-kami" name="member_kami" min="0" required value="{{ form_data.get('member_kami', '') }}" placeholder="0" oninput="calculateIkhtitaam('member')" {% if form_data.get('member_kami', '') != '' %}disabled{% endif %}>
                            </td>
                            <td class="calculated-value" id="member-ikhtitaam">
                              {% if report_exists %}
                                {{ form_data.get('member_ikhtitaam', '') }}
                              {% else %}
                                {{ (form_data.get('member_start', 0) | int) + (form_data.get('member_izafa', 0) | int) - (form_data.get('member_kami', 0) | int) }}
                              {% endif %}
                            </td>
                        </tr>
                    </tbody>
                </table>
            </div>


            <!-- :جماعت اسلامی یوتھ -->
            <div class="form-section">
                <h3 class="section-title">جماعت اسلامی یوتھ</h3>
                
                <div class="form-row">
                    <div class="form-group">
                        <label for="youth-nazm-areas">کتنے علاقہ میں نظم قائم ہے:</label>
                        <input type="number" id="youth-nazm-areas" name="youth_nazm_areas" min="0" required value="{{ form_data.get('youth_nazm_areas', '') }}" placeholder="0" {% if form_data.get('youth_nazm_areas', '') != '' %}disabled{% endif %}>
                    </div>
                    <div class="form-group">
                        <label for="youth-karkunan">کارکنان کی تعداد:</label>
                        <input type="number" id="youth-karkunan" name="youth_karkunan" min="0" required value="{{ form_data.get('youth_karkunan', '') }}" placeholder="0" {% if form_data.get('youth_karkunan', '') != '' %}disabled{% endif %}>
                    </div>
                </div>
                <div class="form-row">
                    <div class="form-group">
                        <label for="youth_programat_count">پروگرامات کی تعداد:</label>
                        <input type="number" id="youth_programat_count" name="youth_programat_count" min="0" max="50" required value="{{ form_data.get('youth_programat_count', '') }}" placeholder="0" {% if form_data.get('youth_programat_count', '') != '' %}disabled{% endif %} oninput="renderProgramatFields()">
                    </div>
                </div>
                <div id="programat-fields-container">
                    {% if programat_list %}
                        {% for item in programat_list %}
                        <div class="form-row programat-row">
                            <div class="form-group">
                                <label>پروگرام کا نام</label>
                                <input type="text" value="{{ item.name }}" disabled required placeholder="0">
                            </div>
                            <div class="form-group">
                                <label>تعداد</label>
                                <input type="number" value="{{ item.count }}" disabled required placeholder="0">
                            </div>
                        </div>
                        {% endfor %}
                    {% else %}
                        {% if form_data.get('youth_programat_count', '') and form_data.get('youth_programat_count', 0)|int > 0 %}
                            {% for i in range(form_data.get('youth_programat_count', 0)|int) %}
                            <div class="form-row programat-row">
                                <div class="form-group">
                                    <label for="programat_{{i+1}}">پروگرامات {{i+1}}</label>
                                    <input type="text" id="programat_{{i+1}}" name="programat_{{i+1}}" required value="{{ form_data.get('programat_' ~ (i+1), '') }}" placeholder="0" {% if form_data.get('programat_' ~ (i+1), '') != '' %}disabled{% endif %}>
                                </div>
                                <div class="form-group">
                                    <label for="programat_count_{{i+1}}">تعداد</label>
                                    <input type="number" id="programat_count_{{i+1}}" name="programat_count_{{i+1}}" min="0" required value="{{ form_data.get('programat_count_' ~ (i+1), '') }}" placeholder="0" {% if form_data.get('programat_count_' ~ (i+1), '') != '' %}disabled{% endif %}>
                                </div>
                            </div>
                            {% endfor %}
                        {% endif %}
                    {% endif %}
                </div>
                <script>
                function renderProgramatFields() {
                    var countInput = document.getElementById('youth_programat_count');
                    var container = document.getElementById('programat-fields-container');
                    var count = parseInt(countInput.value) || 0;
                    // Limit to maximum 50 boxes
                    if (count > 50) {
                        count = 50;
                        countInput.value = 50;
                    }
                    // If disabled, do not allow dynamic changes
                    if (countInput.disabled) return;
                    container.innerHTML = '';
                    for (var i = 1; i <= count; i++) {
                        var row = document.createElement('div');
                        row.className = 'form-row programat-row';
                        // نوعیت input
                        var group1 = document.createElement('div');
                        group1.className = 'form-group';
                        var label1 = document.createElement('label');
                        label1.setAttribute('for', 'programat_' + i);
                        label1.textContent = 'نوعیت';
                        var input1 = document.createElement('input');
                        input1.type = 'text';
                        input1.id = 'programat_' + i;
                        input1.name = 'programat_' + i;
                        input1.className = 'programat-input';
                        input1.required = true;
                        input1.placeholder = 'پروگرام کی نوعیت لکھیں';
                        group1.appendChild(label1);
                        group1.appendChild(input1);
                        // تعداد input
                        var group2 = document.createElement('div');
                        group2.className = 'form-group';
                        var label2 = document.createElement('label');
                        label2.setAttribute('for', 'programat_count_' + i);
                        label2.textContent = 'تعداد';
                        var input2 = document.createElement('input');
                        input2.type = 'number';
                        input2.min = '0';
                        input2.id = 'programat_count_' + i;
                        input2.name = 'programat_count_' + i;
                        input2.className = 'programat-count-input';
                        input2.required = true;
                        input2.placeholder = '0';
                        group2.appendChild(label2);
                        group2.appendChild(input2);
                        // Append groups to row
                        row.appendChild(group1);
                        row.appendChild(group2);
                        container.appendChild(row);
                    }
                }
                // On page load, render fields if value exists and not disabled
                document.addEventListener('DOMContentLoaded', function() {
                    var countInput = document.getElementById('youth_programat_count');
                    if (countInput && !countInput.disabled && countInput.value) {
                        renderProgramatFields();
                    }
                });
                </script>


    
            </div>

            <!-- ضلعی تنظیمی اجتماعات۔ -->
            <div class="form-section">
                <h3 class="section-title">ضلعی تنظیمی اجتماعات</h3>
              <table class="organizational-table">
                    <thead>
                        <!-- Header Row -->
                        <tr>
                            <th></th> <!-- New empty column -->
                            <th>طے شدہ</th>
                            <th>ہوئے</th>
                            <th>حاضری</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>اجلاس ضلعی شوریٰ</td>
                            <td><input type="number" class="input-field" id="zilai-shura-planned" name="zilai_shura_planned" min="0" required placeholder="0" value="{{ form_data.get('zilai_shura_planned', '') }}" {% if form_data.get('zilai_shura_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="zilai-shura-held" name="zilai_shura_held" min="0" required placeholder="0" value="{{ form_data.get('zilai_shura_held', '') }}" {% if form_data.get('zilai_shura_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="zilai-shura-attendance" name="zilai_shura_attendance" min="0" required placeholder="0" value="{{ form_data.get('zilai_shura_attendance', '') }}" {% if form_data.get('zilai_shura_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>اجلاس نظم ضلع</td>                            
                            <td><input type="number" class="input-field" id="nazm-zila-planned" name="nazm_zila_planned" min="0" required placeholder="0" value="{{ form_data.get('nazm_zila_planned', '') }}" {% if form_data.get('nazm_zila_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="nazm-zila-held" name="nazm_zila_held" min="0" required placeholder="0" value="{{ form_data.get('nazm_zila_held', '') }}" {% if form_data.get('nazm_zila_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="nazm-zila-attendance" name="nazm_zila_attendance" min="0" required placeholder="0" value="{{ form_data.get('nazm_zila_attendance', '') }}" {% if form_data.get('nazm_zila_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>اجلاس ناظمین علاقہ جات</td>
                            <td><input type="number" class="input-field" id="nazimin-alaqajat-planned" name="nazimin_alaqajat_planned" min="0" required placeholder="0" value="{{ form_data.get('nazimin_alaqajat_planned', '') }}" {% if form_data.get('nazimin_alaqajat_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="nazimin-alaqajat-held" name="nazimin_alaqajat_held" min="0" required placeholder="0" value="{{ form_data.get('nazimin_alaqajat_held', '') }}" {% if form_data.get('nazimin_alaqajat_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="nazimin-alaqajat-attendance" name="nazimin_alaqajat_attendance" min="0" required placeholder="0" value="{{ form_data.get('nazimin_alaqajat_attendance', '') }}" {% if form_data.get('nazimin_alaqajat_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>ضلعی اجتماع ارکان</td>
                            <td><input type="number" class="input-field" id="zilai-ijtima-arkaan-planned" name="zilai_ijtima_arkaan_planned" min="0" required placeholder="0" value="{{ form_data.get('zilai_ijtima_arkaan_planned', '') }}" {% if form_data.get('zilai_ijtima_arkaan_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="zilai-ijtima-arkaan-held" name="zilai_ijtima_arkaan_held" min="0" required placeholder="0" value="{{ form_data.get('zilai_ijtima_arkaan_held', '') }}" {% if form_data.get('zilai_ijtima_arkaan_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="zilai-ijtima-arkaan-attendance" name="zilai_ijtima_arkaan_attendance" min="0" required placeholder="0" value="{{ form_data.get('zilai_ijtima_arkaan_attendance', '') }}" {% if form_data.get('zilai_ijtima_arkaan_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>ضلعی اجتماع امیدواران</td>
                            <td><input type="number" class="input-field" id="zilai-ijtima-umeedwaran-planned" name="zilai_ijtima_umeedwaran_planned" min="0" required placeholder="0" value="{{ form_data.get('zilai_ijtima_umeedwaran_planned', '') }}" {% if form_data.get('zilai_ijtima_umeedwaran_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="zilai-ijtima-umeedwaran-held" name="zilai_ijtima_umeedwaran_held" min="0" required placeholder="0" value="{{ form_data.get('zilai_ijtima_umeedwaran_held', '') }}" {% if form_data.get('zilai_ijtima_umeedwaran_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="zilai-ijtima-umeedwaran-attendance" name="zilai_ijtima_umeedwaran_attendance" min="0" required placeholder="0" value="{{ form_data.get('zilai_ijtima_umeedwaran_attendance', '') }}" {% if form_data.get('zilai_ijtima_umeedwaran_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                    </tbody>
                </table>
            </div>

            <!--  تنظیمی اجتماعات۔ -->
            <div class="form-section">
                <h3 class="section-title"> تنظیمی اجتماعات</h3>
              <table class="organizational-table">
                    <thead>
                        <!-- Header Row -->
                        <tr>
                            <th></th> <!-- New empty column -->
                            <th>طے شدہ</th>
                            <th>ہوئے</th>
                            <th>حاضری</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>اجتماع ارکان (علاقہ )</td>
                            <td><input type="number" class="input-field" id="ijtima-arkaan-alaqah-planned" name="ijtima_arkaan_alaqah_planned" min="0" required placeholder="0" value="{{ form_data.get('ijtima_arkaan_alaqah_planned', '') }}" {% if form_data.get('ijtima_arkaan_alaqah_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-arkaan-alaqah-held" name="ijtima_arkaan_alaqah_held" min="0" required placeholder="0" value="{{ form_data.get('ijtima_arkaan_alaqah_held', '') }}" {% if form_data.get('ijtima_arkaan_alaqah_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-arkaan-alaqah-attendance" name="ijtima_arkaan_alaqah_attendance" min="0" required placeholder="0" value="{{ form_data.get('ijtima_arkaan_alaqah_attendance', '') }}" {% if form_data.get('ijtima_arkaan_alaqah_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>اجتماع اُمیدواران (علاقہ )</td>                            
                            <td><input type="number" class="input-field" id="ijtima-umeedwaran-alaqah-planned" name="ijtima_umeedwaran_alaqah_planned" min="0" required placeholder="0" value="{{ form_data.get('ijtima_umeedwaran_alaqah_planned', '') }}" {% if form_data.get('ijtima_umeedwaran_alaqah_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-umeedwaran-alaqah-held" name="ijtima_umeedwaran_alaqah_held" min="0" required placeholder="0" value="{{ form_data.get('ijtima_umeedwaran_alaqah_held', '') }}" {% if form_data.get('ijtima_umeedwaran_alaqah_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-umeedwaran-alaqah-attendance" name="ijtima_umeedwaran_alaqah_attendance" min="0" required placeholder="0" value="{{ form_data.get('ijtima_umeedwaran_alaqah_attendance', '') }}" {% if form_data.get('ijtima_umeedwaran_alaqah_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>اجتماع کارکنان (علاقہ )</td>
                            <td><input type="number" class="input-field" id="ijtima-karkunaan-alaqah-planned" name="ijtima_karkunaan_alaqah_planned" min="0" required placeholder="0" value="{{ form_data.get('ijtima_karkunaan_alaqah_planned', '') }}" {% if form_data.get('ijtima_karkunaan_alaqah_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-karkunaan-alaqah-held" name="ijtima_karkunaan_alaqah_held" min="0" required placeholder="0" value="{{ form_data.get('ijtima_karkunaan_alaqah_held', '') }}" {% if form_data.get('ijtima_karkunaan_alaqah_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-karkunaan-alaqah-attendance" name="ijtima_karkunaan_alaqah_attendance" min="0" required placeholder="0" value="{{ form_data.get('ijtima_karkunaan_alaqah_attendance', '') }}" {% if form_data.get('ijtima_karkunaan_alaqah_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>اجتماع کارکنان (حلقہ جات )</td>
                            <td><input type="number" class="input-field" id="ijtima-karkunaan-halqajat-planned" name="ijtima_karkunaan_halqajat_planned" min="0" required placeholder="0" value="{{ form_data.get('ijtima_karkunaan_halqajat_planned', '') }}" {% if form_data.get('ijtima_karkunaan_halqajat_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-karkunaan-halqajat-held" name="ijtima_karkunaan_halqajat_held" min="0" required placeholder="0" value="{{ form_data.get('ijtima_karkunaan_halqajat_held', '') }}" {% if form_data.get('ijtima_karkunaan_halqajat_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-karkunaan-halqajat-attendance" name="ijtima_karkunaan_halqajat_attendance" min="0" required placeholder="0" value="{{ form_data.get('ijtima_karkunaan_halqajat_attendance', '') }}" {% if form_data.get('ijtima_karkunaan_halqajat_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>اجتماع ناظمین (حلقہ جات)</td>
                            <td><input type="number" class="input-field" id="ijtima-nazimin-halqajat-planned" name="ijtima_nazimin_halqajat_planned" min="0" required placeholder="0" value="{{ form_data.get('ijtima_nazimin_halqajat_planned', '') }}" {% if form_data.get('ijtima_nazimin_halqajat_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-nazimin-halqajat-held" name="ijtima_nazimin_halqajat_held" min="0" required placeholder="0" value="{{ form_data.get('ijtima_nazimin_halqajat_held', '') }}" {% if form_data.get('ijtima_nazimin_halqajat_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="ijtima-nazimin-halqajat-attendance" name="ijtima_nazimin_halqajat_attendance" min="0" required placeholder="0" value="{{ form_data.get('ijtima_nazimin_halqajat_attendance', '') }}" {% if form_data.get('ijtima_nazimin_halqajat_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                    </tbody>
                </table>
            </div>

             <!--  دعوتی اجتماعات۔ -->
            <div class="form-section">
                <h3 class="section-title"> دعوتی اجتماعات</h3>
              <table class="organizational-table">
                    <thead>
                        <!-- Header Row -->
                        <tr>
                            <th></th> <!-- New empty column -->
                            <th>طے شدہ</th>
                            <th>ہوئے</th>
                            <th>حاضری</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>درس قرآن (حلقہ جات )</td>
                            <td><input type="number" class="input-field" id="dars-quran-planned" name="dars_quran_planned" min="0" required placeholder="0" value="{{ form_data.get('dars_quran_planned', '') }}" {% if form_data.get('dars_quran_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="dars-quran-held" name="dars_quran_held" min="0" required placeholder="0" value="{{ form_data.get('dars_quran_held', '') }}" {% if form_data.get('dars_quran_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="dars-quran-attendance" name="dars_quran_attendance" min="0" required placeholder="0" value="{{ form_data.get('dars_quran_attendance', '') }}" {% if form_data.get('dars_quran_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>دعوتی کیمپ مستقل و فود</td>                            
                            <td><input type="number" class="input-field" id="dawati-camp-planned" name="dawati_camp_planned" min="0" required placeholder="0" value="{{ form_data.get('dawati_camp_planned', '') }}" {% if form_data.get('dawati_camp_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="dawati-camp-held" name="dawati_camp_held" min="0" required placeholder="0" value="{{ form_data.get('dawati_camp_held', '') }}" {% if form_data.get('dawati_camp_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="dawati-camp-attendance" name="dawati_camp_attendance" min="0" required placeholder="0" value="{{ form_data.get('dawati_camp_attendance', '') }}" {% if form_data.get('dawati_camp_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>گھروں تک دعوت</td>
                            <td><input type="number" class="input-field" id="gharon-tak-dawat-planned" name="gharon_tak_dawat_planned" min="0" required placeholder="0" value="{{ form_data.get('gharon_tak_dawat_planned', '') }}" {% if form_data.get('gharon_tak_dawat_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="gharon-tak-dawat-held" name="gharon_tak_dawat_held" min="0" required placeholder="0" value="{{ form_data.get('gharon_tak_dawat_held', '') }}" {% if form_data.get('gharon_tak_dawat_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="gharon-tak-dawat-attendance" name="gharon_tak_dawat_attendance" min="0" required placeholder="0" value="{{ form_data.get('gharon_tak_dawat_attendance', '') }}" {% if form_data.get('gharon_tak_dawat_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>تقسیم دعوتی لٹریچر</td>
                            <td><input type="number" class="input-field" id="taqseem-literature-planned" name="taqseem_literature_planned" min="0" required placeholder="0" value="{{ form_data.get('taqseem_literature_planned', '') }}" {% if form_data.get('taqseem_literature_planned', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="taqseem-literature-held" name="taqseem_literature_held" min="0" required placeholder="0" value="{{ form_data.get('taqseem_literature_held', '') }}" {% if form_data.get('taqseem_literature_held', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="taqseem-literature-attendance" name="taqseem_literature_attendance" min="0" required placeholder="0" value="{{ form_data.get('taqseem_literature_attendance', '') }}" {% if form_data.get('taqseem_literature_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                    </tbody>
                </table>
            </div>

          

             <!-- تربیتی اِجتماعات -->
            <div class="form-section">
                <h3 class="section-title"> تربیتی اِجتماعات</h3>
              <table class="organizational-table">
                    <thead>
                        <!-- Header Row -->
                        <tr>
                            <th></th> <!-- New empty column -->
                            <th>مقامات</th>
                            <th>دورہ جات</th>
                            <th>حاضری اوسطاً</th>
                        </tr>
                    </thead>
                    <tbody>
                        <tr>
                            <td>اسٹڈی سرکل ڈسکشن</td>
                            <td><input type="number" class="input-field" id="study-circle-maqamat" name="study_circle_maqamat" min="0" required placeholder="0" value="{{ form_data.get('study_circle_maqamat', '') }}" {% if form_data.get('study_circle_maqamat', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="study-circle-daurajat" name="study_circle_daurajat" min="0" required placeholder="0" value="{{ form_data.get('study_circle_daurajat', '') }}" {% if form_data.get('study_circle_daurajat', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="study-circle-attendance" name="study_circle_attendance" min="0" required placeholder="0" value="{{ form_data.get('study_circle_attendance', '') }}" {% if form_data.get('study_circle_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>تعلیمات قرآن کورس</td>
                            <td><input type="number" class="input-field" id="quran-course-maqamat" name="quran_course_maqamat" min="0" required placeholder="0" value="{{ form_data.get('quran_course_maqamat', '') }}" {% if form_data.get('quran_course_maqamat', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="quran-course-daurajat" name="quran_course_daurajat" min="0" required placeholder="0" value="{{ form_data.get('quran_course_daurajat', '') }}" {% if form_data.get('quran_course_daurajat', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="quran-course-attendance" name="quran_course_attendance" min="0" required placeholder="0" value="{{ form_data.get('quran_course_attendance', '') }}" {% if form_data.get('quran_course_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                        <tr>
                            <td>تربیتی اجتماع/ریٹریٹ</td>
                            <td><input type="number" class="input-field" id="retreat-maqamat" name="retreat_maqamat" min="0" required placeholder="0" value="{{ form_data.get('retreat_maqamat', '') }}" {% if form_data.get('retreat_maqamat', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="retreat-daurajat" name="retreat_daurajat" min="0" required placeholder="0" value="{{ form_data.get('retreat_daurajat', '') }}" {% if form_data.get('retreat_daurajat', '') != '' %}disabled{% endif %}></td>
                            <td><input type="number" class="input-field" id="retreat-attendance" name="retreat_attendance" min="0" required placeholder="0" value="{{ form_data.get('retreat_attendance', '') }}" {% if form_data.get('retreat_attendance', '') != '' %}disabled{% endif %}></td>
                        </tr>
                    </tbody>
                </table>
            </div>
            <div class="form-section">
                <h3 class="section-title">مرکز قرآن و سنہ</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="quran-courses">کورسز</label>
                        <input type="number" id="quran-courses" name="quran_courses" min="0" required value="{{ form_data.get('quran_courses', '') }}" placeholder="0" {% if form_data.get('quran_courses', '') != '' %}disabled{% endif %}>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="quran-classes">کلاس</label>
                        <input type="number" id="quran-classes" name="quran_classes" min="0" required value="{{ form_data.get('quran_classes', '') }}" placeholder="0" {% if form_data.get('quran_classes', '') != '' %}disabled{% endif %}>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="quran-participants">شرکاء</label>
                        <input type="number" id="quran-participants" name="quran_participants" min="0" required value="{{ form_data.get('quran_participants', '') }}" placeholder="0" {% if form_data.get('quran_participants', '') != '' %}disabled{% endif %}>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="fahem-quran-attendance">فہم القرآن پروگرام (حاضری)</label>
                        <input type="number" id="fahem-quran-attendance" name="fahem_quran_attendance" min="0" required value="{{ form_data.get('fahem_quran_attendance', '') }}" placeholder="0" {% if form_data.get('fahem_quran_attendance', '') != '' %}disabled{% endif %}>
                    </div>
                </div>

                <div class="form-row">
                    <div class="form-group">
                        <label for="quran-distributed">تقسیم ترجمه قرآن</label>
                        <input type="number" id="quran-distributed" name="quran_distributed" min="0" required value="{{ form_data.get('quran_distributed', '') }}" placeholder="0" {% if form_data.get('quran_distributed', '') != '' %}disabled{% endif %}>
                    </div>
                </div>
            </div>

        <div class="form-section">
            <h3 class="section-title">تنظیمی و دیگر سرگرمیاں</h3>

            <div class="form-row">
                <div class="form-group">
                    <label for="central-training-target">مرکزی تربیت گاہ (حاضری کا ہدف)</label>
                    <input type="number" id="central_training_target" name="central_training_target" min="0" required value="{{ form_data.get('central_training_target', '') }}" placeholder="0" {% if form_data.get('central_training_target', '') != '' %}disabled{% endif %}>
                </div>
                <div class="form-group">
                    <label for="central-training-actual">شرکت</label>
                    <input type="number" id="central_training_actual" name="central_training_actual" min="0" required value="{{ form_data.get('central_training_actual', '') }}" placeholder="0" {% if form_data.get('central_training_actual', '') != '' %}disabled{% endif %}>
                </div>
            </div>

            <div class="form-row">
                <div class="form-group">
                    <label for="other-trainings">دیگر تربیتی اجتماعات (ضلعی تربیت گاہ، شب بیداریاں وغیرہ)</label>
                    <input type="text" id="other_trainings" name="other_trainings" required placeholder="" {% if form_data.get('other_trainings', '') != '' %}disabled value="{{ form_data.get('other_trainings', '') }}"{% endif %}>
                </div>
                <div class="form-group">
                    <label for="atifal-programs">حاضری</label>
                    <input type="number" id="atifal_programs" name="atifal_programs" min="0" required placeholder="0" {% if form_data.get('atifal_programs', '') != '' %}disabled value="{{ form_data.get('atifal_programs', '') }}"{% endif %}>
                </div>
            </div>
        </div>
          <!-- ذمہ داران -->
          <div class="form-section">
            <h3 class="section-title"> ذمہ داران </h3>
          <table class="organizational-table">
                <thead>
                    <!-- Header Row -->
                    <tr>
                        <th></th> <!-- New empty column -->
                        <th>مقامات</th>
                        <th>دورہ جات</th>
                        <th>انفرادی ملاقاتیں</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td>امیر ضلع</td>
                        <td><input type="number" class="input-field" id="amir_zila_maqamat" name="amir_zila_maqamat" min="0" required placeholder="0" value="{{ form_data.get('amir_zila_maqamat', '') }}" {% if form_data.get('amir_zila_maqamat', '') != '' %}disabled{% endif %}></td>
                        <td><input type="number" class="input-field" id="amir_zila_daurajat" name="amir_zila_daurajat" min="0" required placeholder="0" value="{{ form_data.get('amir_zila_daurajat', '') }}" {% if form_data.get('amir_zila_daurajat', '') != '' %}disabled{% endif %}></td>
                        <td><input type="number" class="input-field" id="amir_zila_mulaqat" name="amir_zila_mulaqat" min="0" required placeholder="0" value="{{ form_data.get('amir_zila_mulaqat', '') }}" {% if form_data.get('amir_zila_mulaqat', '') != '' %}disabled{% endif %}></td>
                    </tr>
                    <tr>
                        <td>قیم ضلع</td>                            
                        <td><input type="number" class="input-field" id="qaim_zila_maqamat" name="qaim_zila_maqamat" min="0" required placeholder="0" value="{{ form_data.get('qaim_zila_maqamat', '') }}" {% if form_data.get('qaim_zila_maqamat', '') != '' %}disabled{% endif %}></td>
                        <td><input type="number" class="input-field" id="qaim_zila_daurajat" name="qaim_zila_daurajat" min="0" required placeholder="0" value="{{ form_data.get('qaim_zila_daurajat', '') }}" {% if form_data.get('qaim_zila_daurajat', '') != '' %}disabled{% endif %}></td>
                        <td><input type="number" class="input-field" id="qaim_zila_mulaqat" name="qaim_zila_mulaqat" min="0" required placeholder="0" value="{{ form_data.get('qaim_zila_mulaqat', '') }}" {% if form_data.get('qaim_zila_mulaqat', '') != '' %}disabled{% endif %}></td>
                    </tr>
                    <tr>
                        <td>نائب امیر ضلع</td>
                        <td><input type="number" class="input-field" id="naib_amir_zila_maqamat" name="naib_amir_zila_maqamat" min="0" required placeholder="0" value="{{ form_data.get('naib_amir_zila_maqamat', '') }}" {% if form_data.get('naib_amir_zila_maqamat', '') != '' %}disabled{% endif %}></td>
                        <td><input type="number" class="input-field" id="naib_amir_zila_daurajat" name="naib_amir_zila_daurajat" min="0" required placeholder="0" value="{{ form_data.get('naib_amir_zila_daurajat', '') }}" {% if form_data.get('naib_amir_zila_daurajat', '') != '' %}disabled{% endif %}></td>
                        <td><input type="number" class="input-field" id="naib_amir_zila_mulaqat" name="naib_amir_zila_mulaqat" min="0" required placeholder="0" value="{{ form_data.get('naib_amir_zila_mulaqat', '') }}" {% if form_data.get('naib_amir_zila_mulaqat', '') != '' %}disabled{% endif %}></td>
                    </tr>
                </tbody>
            </table>
        </div>

            <!--کوئی اور بات-->
            <div class="form-section koi-or-bat-section">
                <h3 class="section-title">کوئی اور بات</h3>
                <div class="form-row">
                    <div class="form-group">
                        <label for="koi-or-bat">آپ کی اضافی رائے یا تجاویز</label>
                        <div class="textarea-container">
                            <textarea 
                                id="koi-or-bat" 
                                name="koi_or_bat" 
                                placeholder="کوئی اور بات"
                                oninput="updateCharCounter(this, 'char-counter-koi')"
                                maxlength="5000"
                                required
                                {% if form_data.get('koi_or_bat', '') != '' %}disabled{% endif %}
                            >{{ form_data.get('koi_or_bat', '') }}</textarea>
                            <div class="char-counter" id="char-counter-koi">0 / 5000</div>
                        </div>
                    </div>
                </div>
            </div>

        <!-- فارم بٹن -->
        {% if can_submit %}
        <div class="form-actions">
            <button type="submit" class="submit-btn" onclick="return confirm('کیا آپ واقعی رپورٹ جمع کروانا چاہتے ہیں؟ جمع کروانے کے بعد فارم قابل تدوین نہیں رہے گا۔')">رپورٹ جمع کروائیں</button>
        </div>
        {% else %}
        <div class="form-actions">
            <div class="alert alert-info">تمام فیلڈز مکمل ہیں۔ آپ صرف رپورٹ دیکھ سکتے ہیں۔</div>
        </div>
        {% endif %}
        <a href="{{ url_for('logout') }}" class="reset-btn" style="text-decoration:none;display:inline-block;text-align:center;">لاگ آؤٹ</a>
        </form> <!-- Close the form -->
        </div> <!-- Close the container -->

        <!-- اسکرپٹس -->
        <script>
            function calculateDifference(category) {
                const startValue = parseInt(document.getElementById(category + '-start').textContent) || 0;
                const endValue = parseInt(document.getElementById(category + '-end').value) || 0;
                const difference = endValue - startValue;

                const diffElement = document.getElementById(category + '-diff');
                diffElement.textContent = difference;

                // Remove previous classes
                diffElement.classList.remove('positive', 'negative');

                // Add class based on value
                if (difference > 0) {
                    diffElement.classList.add('positive');
                    diffElement.textContent = '+' + difference;
                } else if (difference < 0) {
                    diffElement.classList.add('negative');
                } else {
                    diffElement.textContent = '0';
                }
            }



            // Init difference calculations
            document.addEventListener('DOMContentLoaded', function () {
                const categories = [
                    'alaqajat',
                    'halqajat',
                    'halqajat-ward',
                    'block-code',
                    'arkaan',
                    'umeedwaran',
                    'members',
                    'muawanin',
                    'mutayyin-afrad'
                ];

                categories.forEach(category => {
                    calculateDifference(category);
                });
            });

            // Character counter function
            function updateCharCounter(textarea, counterId) {
                const counter = document.getElementById(counterId);
                const currentLength = textarea.value.length;
                const maxLength = textarea.maxLength;
                counter.textContent = `${currentLength} / ${maxLength}`;
                
                // Change color based on usage
                if (currentLength > maxLength * 0.8) {
                    counter.style.color = '#e74c3c';
                } else if (currentLength > maxLength * 0.6) {
                    counter.style.color = '#f39c12';
                } else {
                    counter.style.color = '#7f8c8d';
                }
            }

            // Submit button UX
            document.addEventListener('DOMContentLoaded', function () {
                const form = document.querySelector('.report-form');
                const submitBtn = document.querySelector('.submit-btn');

                form.addEventListener('submit', function () {
                    submitBtn.disabled = true;
                    submitBtn.textContent = 'جمع کرایا جا رہا ہے...';
                });
            });
        </script>
 </body>
</html>
