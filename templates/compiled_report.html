<!DOCTYPE html>
<html lang="ur" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>ØªÙ…Ø§Ù… Ø§Ø¶Ù„Ø§Ø¹ Ú©ÛŒ Ù…Ø¬Ù…ÙˆØ¹ÛŒ Ø±Ù¾ÙˆØ±Ù¹ - Ø¬Ù…Ø§Ø¹Øª Ø§Ø³Ù„Ø§Ù…ÛŒ Ø¶Ù„Ø¹ÛŒ Ø±Ù¾ÙˆØ±Ù¹Ù†Ú¯ Ø³Ø³Ù¹Ù…</title>
    <link rel="stylesheet" href="{{ url_for('static', filename='style.css') }}?v=5">
    <link rel="stylesheet" href="{{ url_for('static', filename='chart-styles.css') }}?v=5">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Noto+Nastaliq+Urdu:wght@400;700&display=swap" rel="stylesheet">
    <script src="https://cdn.jsdelivr.net/npm/chart.js@4.4.0/dist/chart.umd.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/chartjs-plugin-datalabels@2.2.0/dist/chartjs-plugin-datalabels.min.js"></script>
    
    <style>
        .compiled-header {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 30px;
            text-align: center;
            border-radius: 15px;
            margin-bottom: 30px;
            box-shadow: 0 8px 25px rgba(231, 76, 60, 0.3);
        }
        
        .compiled-header h1 {
            font-size: 2.5em;
            margin-bottom: 10px;
            text-shadow: 2px 2px 4px rgba(0,0,0,0.3);
        }
        
        .compiled-header p {
            font-size: 1.2em;
            opacity: 0.9;
        }
        
        .back-btn {
            display: inline-block;
            padding: 12px 25px;
            background: #3498db;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin-bottom: 20px;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .back-btn:hover {
            background: #2980b9;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(52, 152, 219, 0.3);
        }
        
        .summary-overview {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
            gap: 20px;
            margin-bottom: 40px;
        }
        
        .summary-card {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            text-align: center;
            border-top: 4px solid #e74c3c;
            transition: transform 0.3s ease;
        }
        
        .summary-card:hover {
            transform: translateY(-5px);
        }
        
        .summary-card h3 {
            color: #2c3e50;
            margin-bottom: 15px;
            font-size: 1.1em;
        }
        
        .summary-number {
            font-size: 2.5em;
            font-weight: bold;
            color: #e74c3c;
            margin-bottom: 10px;
        }
        
        .summary-target {
            color: #7f8c8d;
            font-size: 0.9em;
        }
        
        .charts-section {
            margin-bottom: 40px;
        }
        
        .section-title {
            background: linear-gradient(135deg, #34495e, #2c3e50);
            color: white;
            padding: 20px;
            margin-bottom: 25px;
            border-radius: 10px;
            text-align: center;
            font-size: 1.5em;
            font-weight: bold;
        }
        
        .charts-grid {
            display: grid;
            grid-template-columns: repeat(2, 1fr);
            gap: 30px;
            margin-bottom: 40px;
        }
        
        @media (max-width: 1200px) {
            .charts-grid {
                grid-template-columns: 1fr;
            }
        }
        
        .chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            min-height: 500px;
            display: flex;
            flex-direction: column;
        }
        
        .chart-title {
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
            flex-shrink: 0;
        }
        
        .chart-wrapper {
            position: relative;
            height: 450px;
            margin-bottom: 20px;
            flex: 1;
            display: flex;
            align-items: center;
            justify-content: center;
        }
        
        .chart-wrapper canvas {
            max-width: 100% !important;
            max-height: 100% !important;
            width: auto !important;
            height: auto !important;
        }
        
        .overall-progress-container {
            grid-column: 1 / -1;
            max-width: 600px;
            margin: 0 auto;
        }
        
        .overall-progress-container .chart-wrapper {
            height: 350px;
        }
        
        .full-width-chart-container {
            background: white;
            padding: 25px;
            border-radius: 15px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            margin-bottom: 30px;
            width: 100%;
        }
        
        .full-width-chart-container .chart-title {
            text-align: center;
            font-size: 1.3em;
            font-weight: bold;
            color: #2c3e50;
            margin-bottom: 20px;
            padding-bottom: 10px;
            border-bottom: 2px solid #ecf0f1;
        }
        
        .full-width-chart-container .chart-wrapper {
            position: relative;
            height: 550px;
            width: 100%;
        }
        
        .zilas-table {
            background: white;
            border-radius: 15px;
            padding: 25px;
            box-shadow: 0 5px 20px rgba(0,0,0,0.1);
            overflow-x: auto;
        }
        
        .data-table {
            width: 100%;
            border-collapse: collapse;
            margin-top: 15px;
            font-size: 0.95em;
        }
        
        .data-table th {
            background: linear-gradient(135deg, #e74c3c, #c0392b);
            color: white;
            padding: 15px 8px;
            text-align: center;
            font-weight: bold;
            border: none;
            font-size: 0.9em;
            line-height: 1.3;
        }
        
        .data-table th:first-child {
            border-top-right-radius: 8px;
        }
        
        .data-table th:last-child {
            border-top-left-radius: 8px;
        }
        
        .data-table td {
            padding: 12px 8px;
            text-align: center;
            border-bottom: 1px solid #ecf0f1;
            transition: background-color 0.3s ease;
            vertical-align: middle;
        }
        
        .data-table td:first-child {
            font-weight: bold;
            background-color: #f8f9fa;
            text-align: right;
            padding-right: 15px;
        }
        
        .data-table tr:hover td {
            background-color: #f1f3f4;
        }
        
        .data-table tr:hover td:first-child {
            background-color: #e9ecef;
        }
        
        .data-table tr.no-data td {
            color: #7f8c8d;
            font-style: italic;
            opacity: 0.7;
        }
        
        .progress-bar {
            background: #ecf0f1;
            border-radius: 10px;
            height: 22px;
            overflow: hidden;
            margin: 5px auto;
            width: 90%;
            box-shadow: inset 0 1px 3px rgba(0,0,0,0.1);
        }
        
        .progress-fill {
            height: 100%;
            background: linear-gradient(135deg, #27ae60, #2ecc71);
            border-radius: 10px;
            transition: width 0.8s ease;
            display: flex;
            align-items: center;
            justify-content: center;
            color: white;
            font-weight: bold;
            font-size: 0.8em;
            min-width: fit-content;
            text-shadow: 1px 1px 2px rgba(0,0,0,0.3);
        }
        
        .print-btn {
            display: inline-block;
            padding: 12px 25px;
            background: #27ae60;
            color: white;
            text-decoration: none;
            border-radius: 8px;
            margin: 10px;
            transition: all 0.3s ease;
            font-weight: bold;
        }
        
        .print-btn:hover {
            background: #229954;
            transform: translateY(-2px);
            box-shadow: 0 4px 15px rgba(39, 174, 96, 0.3);
        }
        
        @media print {
            .back-btn, .print-btn { display: none; }
            .chart-wrapper { height: 300px; }
            body { background: white; }
        }
        
        /* Loading animation */
        .loading {
            text-align: center;
            padding: 50px;
            color: #7f8c8d;
        }
        
        .spinner {
            border: 4px solid #f3f3f3;
            border-top: 4px solid #e74c3c;
            border-radius: 50%;
            width: 50px;
            height: 50px;
            animation: spin 1s linear infinite;
            margin: 0 auto 20px;
        }
        
        @keyframes spin {
            0% { transform: rotate(0deg); }
            100% { transform: rotate(360deg); }
        }
    </style>
</head>
<body>
    <div class="container">
        <a href="{{ url_for('dashboard') }}" class="back-btn">â† ÙˆØ§Ù¾Ø³ ÚˆÛŒØ´ Ø¨ÙˆØ±Úˆ</a>
        
        <div class="compiled-header">
            <h1>ğŸ“Š ØªÙ…Ø§Ù… Ø§Ø¶Ù„Ø§Ø¹ Ú©ÛŒ Ù…Ø¬Ù…ÙˆØ¹ÛŒ Ú¯Ø±Ø§ÙÛŒÚ©Ù„ Ø±Ù¾ÙˆØ±Ù¹</h1>
            <div style="margin: 20px 0;">
                <label for="periodSelect" style="font-size: 1.1em; margin-left: 10px;">Ù…Ø¯Øª:</label>
                <select id="periodSelect" onchange="changePeriod()" style="padding: 8px 15px; font-size: 1em; border-radius: 5px; border: 2px solid white; background: rgba(255,255,255,0.9); color: #2c3e50; font-family: 'Noto Nastaliq Urdu'; min-width: 150px;">
                    {% for period in available_periods %}
                    <option value="{{ period }}" {% if period == current_period %}selected{% endif %}>{{ period }}</option>
                    {% endfor %}
                </select>
            </div>
        </div>
        
        <!-- Summary Overview -->
        <div class="summary-overview">
            <div class="summary-card">
                <h3>Ú©Ù„ Ø§Ø¶Ù„Ø§Ø¹</h3>
                <div class="summary-number">{{ compiled_data.summary_stats.total_zilas }}</div>
            </div>

            <div class="summary-card">
                <h3>Ú©Ù„ Ø§Ø±Ú©Ø§Ù†</h3>
                <div class="summary-number">{{ compiled_data.summary_stats.total_arkaan }}</div>
            </div>
            <div class="summary-card">
                <h3>Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ø§Ù†</h3>
                <div class="summary-number">{{ compiled_data.summary_stats.total_umeedwaran }}</div>
            </div>
            <div class="summary-card">
                <h3>Ú©Ø§Ø±Ú©Ù†Ø§Ù†</h3>
                <div class="summary-number">{{ compiled_data.summary_stats.total_karkunan }}</div>
            </div>
            <div class="summary-card">
                <h3>Ú©Ù„ Ù…Ù…Ø¨Ø±Ø²</h3>
                <div class="summary-number">{{ compiled_data.summary_stats.total_members }}</div>
            </div>
            <div class="summary-card">
                <h3>Ú©Ù„ Ø­Ù„Ù‚Û Ø¬Ø§Øª</h3>
                <div class="summary-number">{{ compiled_data.summary_stats.total_halqajat }}</div>
            </div>
            <div class="summary-card">
                <h3>Ú©Ù„ Ø¹Ù„Ø§Ù‚Û Ø¬Ø§Øª</h3>
                <div class="summary-number">{{ compiled_data.summary_stats.total_alaqajat }}</div>
            </div>
            <div class="summary-card">
                <h3>Ù†Ø¸Ø§Ù… ÙØ¬Ø±</h3>
                <div class="summary-number">{{ compiled_data.summary_stats.total_nizam_fajar }}</div>
            </div>
        </div>
        
        
        <!-- Detailed Charts - Full Width -->
        <div class="charts-section">
            <div class="section-title">ğŸ“ˆ ØªÙ…Ø§Ù… Ø§Ø¶Ù„Ø§Ø¹ Ú©ÛŒ ØªÙØµÛŒÙ„ÛŒ Ú©Ø§Ø±Ú©Ø±Ø¯Ú¯ÛŒ</div>
            
            <!-- Tanzeemi Hayyat Charts -->
            <div class="full-width-chart-container">
                <div class="chart-title">Ø¨Ù„Ø§Ú© Ú©ÙˆÚˆ Ø§Ù†Ú†Ø§Ø±Ø¬Ø²</div>
                <div class="chart-wrapper">
                    <canvas id="blockCodeAllChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ù†Ø¸Ø§Ù… ÙØ¬Ø±</div>
                <div class="chart-wrapper">
                    <canvas id="nizamFajarAllChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ø¹ÙˆØ§Ù…ÛŒ Ú©Ù…ÛŒÙ¹ÛŒ</div>
                <div class="chart-wrapper">
                    <canvas id="awaamiCommitteeAllChart"></canvas>
                </div>
            </div>
            
            <!-- Afradi Quwat Charts -->
            <div class="full-width-chart-container">
                <div class="chart-title">Ø§Ø±Ú©Ø§Ù† Ø³Ø§Ø²ÛŒ</div>
                <div class="chart-wrapper">
                    <canvas id="arkaanAllChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ù…Ù…Ø¨Ø±Ø²</div>
                <div class="chart-wrapper">
                    <canvas id="membersChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ø§Ù† Ø±Ú©Ù†ÛŒØª</div>
                <div class="chart-wrapper">
                    <canvas id="umeedwaranAllChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ú©Ø§Ø±Ú©Ù†Ø§Ù†</div>
                <div class="chart-wrapper">
                    <canvas id="karkunanAllChart"></canvas>
                </div>
            </div>
            
            <!-- Ijtimaat Charts -->
            <div class="full-width-chart-container">
                <div class="chart-title">Ø§Ø¬ØªÙ…Ø§Ø¹ Ú©Ø§Ø±Ú©Ù†Ø§Ù† (Ø¹Ù„Ø§Ù‚Û)</div>
                <div class="chart-wrapper">
                    <canvas id="ijtimaAlaqahAllChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ø§Ø¬ØªÙ…Ø§Ø¹ Ú©Ø§Ø±Ú©Ù†Ø§Ù† (Ø­Ù„Ù‚Û Ø¬Ø§Øª)</div>
                <div class="chart-wrapper">
                    <canvas id="ijtimaHalqajatAllChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ø¯Ø±Ø³ Ù‚Ø±Ø¢Ù†</div>
                <div class="chart-wrapper">
                    <canvas id="darsQuranAllChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ú¯Ú¾Ø±ÙˆÚº ØªÚ© Ø¯Ø¹ÙˆØª</div>
                <div class="chart-wrapper">
                    <canvas id="gharonTakDawatAllChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">ØªÙ‚Ø³ÛŒÙ… Ù„Ù¹Ø±ÛŒÚ†Ø±</div>
                <div class="chart-wrapper">
                    <canvas id="taqseemLiteratureAllChart"></canvas>
                </div>
            </div>
            
            <!-- Original comparison charts -->
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ø­Ù„Ù‚Û Ø¬Ø§Øª - Ø§Ø®ØªØªØ§Ù…</div>
                <div class="chart-wrapper">
                    <canvas id="halqajatChart"></canvas>
                </div>
            </div>
            
            <div class="full-width-chart-container">
                <div class="chart-title">Ø¹Ù„Ø§Ù‚Û Ø¬Ø§Øª - Ø§Ø®ØªØªØ§Ù…</div>
                <div class="chart-wrapper">
                    <canvas id="alaqajatChart"></canvas>
                </div>
            </div>
        </div>
        

    </div>
    
    <script>
        // Register the datalabels plugin
        Chart.register(ChartDataLabels);
        
        // Chart configuration
        const commonOptions = {
            responsive: true,
            maintainAspectRatio: false,
            layout: {
                padding: {
                    top: 40,
                    bottom: 10,
                    left: 10,
                    right: 10
                }
            },
            plugins: {
                legend: {
                    display: false
                },
                tooltip: {
                    titleFont: {
                        family: 'Noto Nastaliq Urdu',
                        size: 14
                    },
                    bodyFont: {
                        family: 'Noto Nastaliq Urdu',
                        size: 13
                    }
                },
                datalabels: {
                    display: true,
                    anchor: 'end',
                    align: 'top',
                    color: '#2c3e50',
                    font: {
                        size: 18,
                        weight: 'bold',
                        family: 'Noto Nastaliq Urdu'
                    },
                    textAlign: 'center',
                    formatter: function(value) {
                        return value;
                    }
                }
            },
            scales: {
                y: {
                    beginAtZero: true,
                    grid: {
                        color: '#f1f3f4',
                        lineWidth: 1
                    },
                    ticks: {
                        font: {
                            family: 'Noto Nastaliq Urdu',
                            size: 12
                        },
                        padding: 8
                    }
                },
                x: {
                    grid: {
                        display: false
                    },
                    ticks: {
                        font: {
                            family: 'Noto Nastaliq Urdu',
                            size: 13,
                            weight: 'bold'
                        },
                        maxRotation: 45,
                        minRotation: 0,
                        padding: 8
                    }
                }
            }
        };
        

        

        // Members Chart (single bar - izafa)
        const membersCtx = document.getElementById('membersChart').getContext('2d');
        new Chart(membersCtx, {
            type: 'bar',
            data: {
                labels: {{ compiled_data.chart_data.members_by_zila.labels | tojson }},
                datasets: [{
                    label: 'Ø§Ø¶Ø§ÙÛ',
                    data: {{ compiled_data.chart_data.members_by_zila.achieved | tojson }},
                    backgroundColor: '#48EF62',
                    borderColor: '#3dd44f',
                    borderWidth: 1,
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                ...commonOptions,
                plugins: {
                    ...commonOptions.plugins,
                    legend: {
                        display: false
                    }
                }
            }
        });
        
        // Halqajat Chart (single bar - izafa)
        const halqajatCtx = document.getElementById('halqajatChart').getContext('2d');
        new Chart(halqajatCtx, {
            type: 'bar',
            data: {
                labels: {{ compiled_data.chart_data.halqajat_by_zila.labels | tojson }},
                datasets: [{
                    label: 'Ø§Ø¶Ø§ÙÛ',
                    data: {{ compiled_data.chart_data.halqajat_by_zila.achieved | tojson }},
                    backgroundColor: '#48EF62',
                    borderColor: '#3dd44f',
                    borderWidth: 1,
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                ...commonOptions,
                plugins: {
                    ...commonOptions.plugins,
                    legend: {
                        display: false
                    }
                }
            }
        });
        
        // Alaqajat Chart (single bar - izafa)
        const alaqajatCtx = document.getElementById('alaqajatChart').getContext('2d');
        new Chart(alaqajatCtx, {
            type: 'bar',
            data: {
                labels: {{ compiled_data.chart_data.alaqajat_by_zila.labels | tojson }},
                datasets: [{
                    label: 'Ø§Ø¶Ø§ÙÛ',
                    data: {{ compiled_data.chart_data.alaqajat_by_zila.achieved | tojson }},
                    backgroundColor: '#48EF62',
                    borderColor: '#3dd44f',
                    borderWidth: 1,
                    borderRadius: 4,
                    borderSkipped: false
                }]
            },
            options: {
                ...commonOptions,
                plugins: {
                    ...commonOptions.plugins,
                    legend: {
                        display: false
                    }
                }
            }
        });
        
        // Helper function to create detailed charts for all zilas (single bar per zila)
        function createDetailedChart(canvasId, title, dataType) {
            const ctx = document.getElementById(canvasId).getContext('2d');
            const zilas = {{ compiled_data.zilas | tojson }};
            
            const labels = [];
            const chartData = [];
            
            // Determine if this chart type should show izafa or houye
            const isIjtimaType = dataType.includes('ijtima') || dataType.includes('dars') || dataType.includes('gharon') || dataType.includes('taqseem');
            
            zilas.forEach(zila => {
                if (zila.has_data && zila.detailed_charts[dataType]) {
                    labels.push(zila.name);
                    const data = zila.detailed_charts[dataType];
                    
                    if (isIjtimaType) {
                        // For ijtimaat charts - show houye (held)
                        chartData.push(data.q2.held || 0);
                    } else {
                        // For tanzeemi and afradi charts - show izafa
                        chartData.push(data.q2.izafa || 0);
                    }
                }
            });
            
            new Chart(ctx, {
                type: 'bar',
                data: {
                    labels: labels,
                    datasets: [{
                        label: isIjtimaType ? 'ÛÙˆØ¦Û’' : 'Ø§Ø¶Ø§ÙÛ',
                        data: chartData,
                        backgroundColor: '#48EF62',
                        borderColor: '#3dd44f',
                        borderWidth: 1,
                        borderRadius: 4,
                        borderSkipped: false
                    }]
                },
                options: {
                    responsive: true,
                    maintainAspectRatio: false,
                    layout: {
                        padding: {
                            top: 40,
                            bottom: 10,
                            left: 10,
                            right: 10
                        }
                    },
                    plugins: {
                        title: {
                            display: false
                        },
                        legend: {
                            display: false
                        },
                        tooltip: {
                            titleFont: {
                                family: 'Noto Nastaliq Urdu',
                                size: 14
                            },
                            bodyFont: {
                                family: 'Noto Nastaliq Urdu',
                                size: 13
                            }
                        },
                        datalabels: {
                            display: true,
                            anchor: 'end',
                            align: 'top',
                            color: '#2c3e50',
                            font: {
                                size: 18,
                                weight: 'bold',
                                family: 'Noto Nastaliq Urdu'
                            },
                            textAlign: 'center',
                            formatter: function(value) {
                                return value;
                            }
                        }
                    },
                    scales: {
                        y: {
                            beginAtZero: true,
                            grid: {
                                color: '#f1f3f4',
                                lineWidth: 1
                            },
                            ticks: {
                                font: {
                                    family: 'Noto Nastaliq Urdu',
                                    size: 12
                                },
                                padding: 8
                            }
                        },
                        x: {
                            grid: {
                                display: false
                            },
                            ticks: {
                                font: {
                                    family: 'Noto Nastaliq Urdu',
                                    size: 13,
                                    weight: 'bold'
                                },
                                maxRotation: 45,
                                minRotation: 0,
                                padding: 8
                            }
                        }
                    }
                }
            });
        }
        
        // Create all detailed charts
        createDetailedChart('blockCodeAllChart', 'Ø¨Ù„Ø§Ú© Ú©ÙˆÚˆ Ø§Ù†Ú†Ø§Ø±Ø¬Ø²', 'block_code_data');
        createDetailedChart('nizamFajarAllChart', 'Ù†Ø¸Ø§Ù… ÙØ¬Ø±', 'nizam_fajar_data');
        createDetailedChart('awaamiCommitteeAllChart', 'Ø¹ÙˆØ§Ù…ÛŒ Ú©Ù…ÛŒÙ¹ÛŒ', 'awaami_committee_data');
        createDetailedChart('arkaanAllChart', 'Ø§Ø±Ú©Ø§Ù† Ø³Ø§Ø²ÛŒ', 'arkaan_data');
        createDetailedChart('umeedwaranAllChart', 'Ø§Ù…ÛŒØ¯ÙˆØ§Ø±Ø§Ù† Ø±Ú©Ù†ÛŒØª', 'umeedwaran_data');
        createDetailedChart('karkunanAllChart', 'Ú©Ø§Ø±Ú©Ù†Ø§Ù†', 'karkunan_data');
        createDetailedChart('ijtimaAlaqahAllChart', 'Ø§Ø¬ØªÙ…Ø§Ø¹ Ú©Ø§Ø±Ú©Ù†Ø§Ù† (Ø¹Ù„Ø§Ù‚Û)', 'ijtima_karkunan_alaqah_data');
        createDetailedChart('ijtimaHalqajatAllChart', 'Ø§Ø¬ØªÙ…Ø§Ø¹ Ú©Ø§Ø±Ú©Ù†Ø§Ù† (Ø­Ù„Ù‚Û Ø¬Ø§Øª)', 'ijtima_karkunan_halqajat_data');
        createDetailedChart('darsQuranAllChart', 'Ø¯Ø±Ø³ Ù‚Ø±Ø¢Ù†', 'dars_quran_data');
        createDetailedChart('gharonTakDawatAllChart', 'Ú¯Ú¾Ø±ÙˆÚº ØªÚ© Ø¯Ø¹ÙˆØª', 'gharon_tak_dawat_data');
        createDetailedChart('taqseemLiteratureAllChart', 'ØªÙ‚Ø³ÛŒÙ… Ù„Ù¹Ø±ÛŒÚ†Ø±', 'taqseem_literature_data');
        
        // Add smooth scrolling for better UX
        document.querySelectorAll('a[href^="#"]').forEach(anchor => {
            anchor.addEventListener('click', function (e) {
                e.preventDefault();
                document.querySelector(this.getAttribute('href')).scrollIntoView({
                    behavior: 'smooth'
                });
            });
        });
        
        // Handle period selection change
        function changePeriod() {
            const selectedPeriod = document.getElementById('periodSelect').value;
            const currentUrl = new URL(window.location);
            currentUrl.searchParams.set('period', selectedPeriod);
            window.location.href = currentUrl.toString();
        }
    </script>
</body>
</html>
